<!--
//T3: Primeros pasos con JavaScript en una aplicación web / Primers passos amb JavaScript en una aplicació web
//U3: Eventos / Esdeveniments

    -- CASTELLANO
    -- EJERCICIO 3.3.1 ENUNCIADO: 
	Dado el siguiente documento HTML, en donde se representan 3 objetos SVG (un círculo rojo, un rectángulo verde y un triángulo naranja) se nos pide:
    Utilizar el método "addEventListener" para agregar un evento al pasar el ratón por encima (mouseover) a cada uno de los elementos SVG de manera que,
    cuando se detecte el evento, cambie el color del elemento por el color del elemento inmediatamente a su derecha (para el caso del triángulo, tomará el 
    valor del color que tiene definido el primer elemento, el círculo en este caso, al no tener más elementos a su derecha).
	
-->
<!DOCTYPE html>
<html>
  <head>
	<meta charset="UTF-8">
	<title>T3U2_EX1</title>
    <style>
      .red{
		    fill:red;
      }
      .green{
        fill: green;
      }
      .orange{
        fill: orange;
      }
      .svg-container {
        display: flex;
        justify-content: center;
      }
    </style>
  </head>
  <body>
    <div class="svg-container">
      <svg width="600px" height="200">
        <circle cx="50" cy="50" r="40" class="red" id="circle"></circle>
        <rect x="260" y="20" width="60" height="60" class="green" id="rect"></rect>
        <polygon points="540,20 580,80 500,80" class="orange" id="polygon"></polygon>
      </svg>
    </div>
    <script defer id="solutionJS">
        //Escribe aquí tu solución / escriviu aquí la vostra solució:
       
        const circle = document.getElementById('circle');
        const rect = document.getElementById('rect');
        const polygon = document.getElementById('polygon');

        // Obtenemos los colores iniciales de cada elemento
        // Usamos getComputedStyle para obtener el valor de la propiedad 'fill' (color)
        const colorCircle = window.getComputedStyle(circle).getPropertyValue('fill');
        const colorRect = window.getComputedStyle(rect).getPropertyValue('fill');
        const colorPolygon = window.getComputedStyle(polygon).getPropertyValue('fill');

        // Creamos una lista de los elementos y los colores que deben tomar al pasar el ratón
        // La estructura es un array de objetos, donde cada objeto contiene:
        // - element: el elemento SVG
        // - nextColor: el color que debe adoptar (el del elemento a su derecha)
        const elements = [
            {
                element: circle,
                nextColor: colorRect // Círculo toma el color del Rectángulo (verde)
            },
            {
                element: rect,
                nextColor: colorPolygon // Rectángulo toma el color del Triángulo (naranja)
            },
            {
                element: polygon,
                nextColor: colorCircle // Triángulo toma el color del Círculo (rojo) - Cíclico
            }
        ];

        // 3. Iterar sobre la lista y agregar el evento 'mouseover'
        elements.forEach(item => {
            item.element.addEventListener('mouseover', function() {
                // Al detectar el evento, cambiamos el atributo 'fill' (color) del elemento
                item.element.setAttribute('fill', item.nextColor);
            });
        });          
	</script>
    <script defer id="test">
        /**
        * TEST
        * The purpose of this code is purely for TESTING PURPOSES, 
        * Do not modify this script
        */
        document.getElementById('circle').dispatchEvent(new Event('mouseover'));
        document.getElementById('polygon').dispatchEvent(new Event('mouseover'));        
        window.test = document.querySelector(".svg-container");
    </script>
  </body>
</html>

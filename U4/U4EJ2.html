<!--//T3: Primeros pasos con JavaScript en una aplicación web / Primers passos amb JavaScript en una aplicació web
//U4: Formularios / Formularis

  -- CASTELLANO
  -- EJERCICIO 3.4.2 ENUNCIADO: 
	Dado el siguiente código HTML de un formulario, en donde se recogen los datos de los vehículos de un concesionario, escribe un script de manera que, si en los extras se selecciona 
	"tinted windows" (cristales tintados) o "armored windows" (cristales blindados) no sea posible seleccionar la opción de techo corredizo (sunroof) ni viceversa,
	debido a que son incompatibles por políticas de seguridad.

-->
<!DOCTYPE html>
<html>
    <head>
        <title>Cars Form</title>
    </head>
    <body>
        <h1>Cars Form</h1>

        <form>
        <label for="car-model">Car Model:</label>
        <input type="text" id="car-model" name="car-model">
        <br><br>
        
        <label for="year-of-registration">Year of Registration:</label>
        <input type="number" id="year-of-registration" name="year-of-registration">
        <br><br>

        <label>Fuel Type:</label>
        <label for="diesel">Diesel</label>
        <input type="radio" id="diesel" name="fuel-type" value="diesel">
        <label for="gasoline">Gasoline</label>
        <input type="radio" id="gasoline" name="fuel-type" value="gasoline">
        <br><br>

        <label>Vehicle Extras:</label>
        <input type="checkbox" id="gps" name="extras" value="gps">
        <label for="gps">GPS</label>
        <br>
        <input type="checkbox" id="leather-seats" name="extras" value="leather-seats">
        <label for="leather-seats">Leather Seats</label>
        <br>
        <input type="checkbox" id="sunroof" name="extras" value="sunroof">
        <label for="sunroof">Sunroof</label>
        <br>
        <input type="checkbox" id="armored-windows" name="extras" value="armored-windows">
        <label for="armored-windows">Armored windows</label>
        <br>
        <input type="checkbox" id="tinted-windows" name="extras" value="tinted-windows">
        <label for="tinted-windows">Tinted windows</label>
        <br><br>

        <label for="car-brand">Car Brand:</label><br>
        <select id="car-brand" name="car-brand">
            <option value="">Choose a brand</option>
            <option value="audi">Audi</option>
            <option value="bmw">BMW</option>
            <option value="mercedes">Mercedes</option>
            <option value="toyota">Toyota</option>
        </select>
        <br><br>
        
        <input type="submit" value="Submit">
        </form>
        <script defer id="solutionJS">
        //Escribe aquí tu solución / escriviu aquí la vostra solució:

        // Obtenemos los elementos del formulario
        const tintedWindows = document.getElementById('tinted-windows');
        const armoredWindows = document.getElementById('armored-windows');
        const sunroof = document.getElementById('sunroof');

        // Definimos la función para  manejar la incompatibilidad
        function handleIncompatibility() {
            // Verificar si alguna de las opciones de ventanas de seguridad está marcada
            const isWindowExtraSelected = tintedWindows.checked || armoredWindows.checked;

            if (isWindowExtraSelected) {
                // Si se selecciona "tinted windows" o "armored windows":
                // Deshabilitar el "sunroof"
                sunroof.disabled = true;
                // Si ya estuviera seleccionado, desmarcarlo
                sunroof.checked = false;     
            } else {
                // Si ninguna opción de ventana de seguridad está seleccionada:
                // Habilitar el "sunroof"
                sunroof.disabled = false;
            }

            // Comprobar la incompatibilidad inversa: si el sunroof está marcado, deshabilitar las ventanas.
            if (sunroof.checked) {
                // Si el "sunroof" está seleccionado:
                // Deshabilitar las opciones de ventanas
                tintedWindows.disabled = true;
                armoredWindows.disabled = true;
                // Asegurarse de desmarcarlas si ya lo estuvieran (aunque la lógica anterior lo evitaría)
                tintedWindows.checked = false;
                armoredWindows.checked = false;
            } else {
                // Si el "sunroof" no está seleccionado:
                // Habilitar las opciones de ventanas
                tintedWindows.disabled = false;
                armoredWindows.disabled = false;
            }
        }

        // Asignamos la función a los eventos "change" de todos los elementos involucrados
        tintedWindows.addEventListener('change', handleIncompatibility);
        armoredWindows.addEventListener('change', handleIncompatibility);
        sunroof.addEventListener('change', handleIncompatibility);
        
        </script>
        <script defer id="test">
            /**
            * TEST
            * The purpose of this code is purely for TESTING PURPOSES, 
            * Do not modify this script
            */
            let resultTest = new Array();
            
            document.querySelector('#armored-windows').checked = true;
            document.querySelector('#tinted-windows').checked = true;
            document.querySelector('#sunroof').dispatchEvent(new Event('change'));
            resultTest.push([document.querySelector('#armored-windows').checked, document.querySelector('#tinted-windows').checked]);
            document.querySelector('#sunroof').checked = true;
            document.querySelector('#armored-windows').dispatchEvent(new Event('change'));
            resultTest.push(document.querySelector('#sunroof').checked);
            document.querySelector('#tinted-windows').dispatchEvent(new Event('change'));
            resultTest.push(document.querySelector('#sunroof').checked);
            window.test = resultTest;
        </script>
    </body>
</html>

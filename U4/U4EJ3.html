<!--
//T3: Primeros pasos con JavaScript en una aplicación web / Primers passos amb JavaScript en una aplicació web
//U4: Formularios / Formularis

  -- CASTELLANO
  -- EJERCICIO 3.4.3 ENUNCIADO: 
	Dado el siguiente código HTML de un formulario, en donde se recogen los datos de los vehículos de un concesionario, complétalo de manera que, si se intenta enviar 
	sin haber seleccionado al menos un extra, nos  muestre dentro del elemento [myContent] un texto que indique literalmente lo siguiente "You must select almost one extra", 
    ya que al menos, se debe seleccionar un extra para proceder a enviar el formulario y no nos permita enviar el formulario.
	NOTA: para evitar el envío de un formulario en JS disponemos de event.preventDefault(); siendo event el evento capturado por parámetro en la función addEventListener
-->
<!DOCTYPE html>
<html>
    <head>
        <title>Cars Form</title>
        <style>
            .container {
                display: flex;
                justify-content: center;
            }
            .content {
                padding: 20px;
                text-align: center;			
                font-size:40px;
                color: blue;
                width: 100%;
            }
        </style>
    </head>
    <body>
        <h1>Cars Form</h1>

        <div class="container">
            
        <form>
            <label for="car-model">Car Model:</label>
            <input type="text" id="car-model" name="car-model">
            <br><br>            
            <label for="year-of-registration">Year of Registration:</label>
            <input type="number" id="year-of-registration" name="year-of-registration">
            <br><br>

            <label>Fuel Type:</label>
            <label for="diesel">Diesel</label>
            <input type="radio" id="diesel" name="fuel-type" value="diesel">
            <label for="gasoline">Gasoline</label>
            <input type="radio" id="gasoline" name="fuel-type" value="gasoline">
            <br><br>

            <label>Vehicle Extras:</label>
            <input type="checkbox" id="gps" name="extras" value="gps">
            <label for="gps">GPS</label>
            <br>
            <input type="checkbox" id="leather-seats" name="extras" value="leather-seats">
            <label for="leather-seats">Leather Seats</label>
            <br>
            <input type="checkbox" id="sunroof" name="extras" value="sunroof">
            <label for="sunroof">Sunroof</label>
            <br>
            <input type="checkbox" id="armored-windows" name="extras" value="armored-windows">
            <label for="armored-windows">Armored windows</label>
            <br>
            <input type="checkbox" id="tinted-windows" name="extras" value="tinted-windows">
            <label for="tinted-windows">Tinted windows</label>
            <br><br>

            <label for="car-brand">Car Brand:</label><br>
            <select id="car-brand" name="car-brand">
                <option value="">Choose a brand</option>
                <option value="audi">Audi</option>
                <option value="bmw">BMW</option>
                <option value="mercedes">Mercedes</option>
                <option value="toyota">Toyota</option>
            </select>
            <br><br>            
            <input type="submit" value="Submit" id="mySubmit">
        </form>
        </div>
		<div id="myContent" class="content"></div>
    </body>
    <script defer id="solutionJS">
        //Escribe aquí tu solución / escriviu aquí la vostra solució:
        // Obtenemos una referencia al formulario y al elemento de contenido
        const form = document.querySelector("form");
        const myContent = document.getElementById("myContent");

        // Añadimos un listener al evento "submit" del formulario
        form.addEventListener("submit", function(event) {
            // Obtenemos todos los checkboxes con el nombre "extras"
            const extrasCheckboxes = document.querySelectorAll('input[name="extras"]"');
            
            // Comprobamos si al menos un checkbox está seleccionado
            let isExtraSelected = false;
            
            for (let i = 0; i < extrasCheckboxes.length; i++) {
                if (extrasCheckboxes[i].checked) {
                    isExtraSelected = true;
                    break; 
                }
            }
            
            // Si no se seleccionó ningún extra, prevenir el envío y mostrar el mensaje
            if (!isExtraSelected) {
                // Prevenir el envío del formulario
                event.preventDefault(); 
                
                // Mostrar el mensaje de error requerido
                myContent.textContent = "You must select almost one extra";
                
                // Opcional: enfocar el primer checkbox de extras para guiar al usuario
                extrasCheckboxes[0].focus(); 
            } else {
                // Si la validación es exitosa, limpiar cualquier mensaje de error anterior
                myContent.textContent = "";
                // El formulario se enviará ya que no se llama a event.preventDefault()
            }
        });
    </script>
    <script defer id="test">
        /**
        * TEST
        * The purpose of this code is purely for TESTING PURPOSES, 
        * Do not modify this script
        */  
        document.querySelector('#mySubmit').dispatchEvent(new Event('click'));
        window.test = document.querySelector('#myContent').textContent;
    </script>
</html>

<!--
//T3: Primeros pasos con JavaScript en una aplicación web / Primers passos amb JavaScript en una aplicació web
//U4: Formularios / Formularis

  -- CASTELLANO
  -- EJERCICIO 3.4.3 ENUNCIADO: 
	Dado el siguiente código HTML de un formulario, en donde se recogen los datos de los vehículos de un concesionario, complétalo de manera que, si se intenta enviar 
	sin haber seleccionado al menos un extra, nos  muestre dentro del elemento [myContent] un texto que indique literalmente lo siguiente "You must select almost one extra", 
    ya que al menos, se debe seleccionar un extra para proceder a enviar el formulario y no nos permita enviar el formulario.
	NOTA: para evitar el envío de un formulario en JS disponemos de event.preventDefault(); siendo event el evento capturado por parámetro en la función addEventListener
-->
<<!DOCTYPE html>
<html>
    <head>
        <title>Cars Form</title>
        <style>
            .container {
                display: flex;
                justify-content: center;
            }
            .content {
                padding: 20px;
                text-align: center;         
                font-size:40px;
                color: blue;
                width: 100%;
            }
        </style>
    </head>
    <body>
        <h1>Cars Form</h1>

        <div class="container">
            
        <form id="car-form"> <label for="car-model">Car Model:</label>
            <input type="text" id="car-model" name="car-model">
            <br><br>            
            <label for="year-of-registration">Year of Registration:</label>
            <input type="number" id="year-of-registration" name="year-of-registration">
            <br><br>

            <label>Fuel Type:</label>
            <label for="diesel">Diesel</label>
            <input type="radio" id="diesel" name="fuel-type" value="diesel">
            <label for="gasoline">Gasoline</label>
            <input type="radio" id="gasoline" name="fuel-type" value="gasoline">
            <br><br>

            <label>Vehicle Extras:</label><br> <input type="checkbox" id="gps" name="extras" value="gps" class="extra-checkbox">
            <label for="gps">GPS</label>
            <br>
            <input type="checkbox" id="leather-seats" name="extras" value="leather-seats" class="extra-checkbox">
            <label for="leather-seats">Leather Seats</label>
            <br>
            <input type="checkbox" id="sunroof" name="extras" value="sunroof" class="extra-checkbox">
            <label for="sunroof">Sunroof</label>
            <br>
            <input type="checkbox" id="armored-windows" name="extras" value="armored-windows" class="extra-checkbox">
            <label for="armored-windows">Armored windows</label>
            <br>
            <input type="checkbox" id="tinted-windows" name="extras" value="tinted-windows" class="extra-checkbox">
            <label for="tinted-windows">Tinted windows</label>
            <br><br>

            <label for="car-brand">Car Brand:</label><br>
            <select id="car-brand" name="car-brand">
                <option value="">Choose a brand</option>
                <option value="audi">Audi</option>
                <option value="bmw">BMW</option>
                <option value="mercedes">Mercedes</option>
                <option value="toyota">Toyota</option>
            </select>
            <br><br>            
            <input type="submit" value="Submit" id="mySubmit">
        </form>
        </div>
        <div id="myContent" class="content"></div>
    </body>
    <script defer id="solutionJS">
        //Escribe aquí tu solución :
        document.addEventListener('DOMContentLoaded', function() {
            // Obtenemos el formulario y el elemento de contenido
            const form = document.getElementById('car-form');
            const contentDiv = document.getElementById('myContent');

            // Escuchamos el evento 'submit' del formulario
            form.addEventListener('submit', function(event) {
                // Obtenemos todos los checkboxes de "extras"
                const extraCheckboxes = document.querySelectorAll('input[name="extras"]');
                let extraSelected = false;

                // Comprobar si al menos uno está seleccionado
                for (let i = 0; i < extraCheckboxes.length; i++) {
                    if (extraCheckboxes[i].checked) {
                        extraSelected = true;
                        break; // Sale del bucle si encuentra uno seleccionado
                    }
                }

                // Si no hay ningún extra seleccionado, prevenir el envío
                if (!extraSelected) {
                    event.preventDefault(); // Detiene el envío del formulario
                    contentDiv.textContent = "You must select almost one extra"; // Muestra el mensaje de error
                } else {
                    contentDiv.textContent = "Formulario enviado!"; 
                }
            });
        });
        
    </script>
    <script defer id="test">
        /**
        * TEST
        * The purpose of this code is purely for TESTING PURPOSES, 
        * Do not modify this script
        */  
        document.querySelector('#mySubmit').dispatchEvent(new Event('click'));
        window.test = document.querySelector('#myContent').textContent;
    </script>
</html>
